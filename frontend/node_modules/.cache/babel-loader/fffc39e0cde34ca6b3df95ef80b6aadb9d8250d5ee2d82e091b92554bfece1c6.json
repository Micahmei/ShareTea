{"ast":null,"code":"import React,{useState}from\"react\";import axios from\"axios\";import{useNavigate}from\"react-router-dom\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const XReport=()=>{const[startHour,setStartHour]=useState(0);const[endHour,setEndHour]=useState(23);const[reportData,setReportData]=useState([]);const navigate=useNavigate();const handleGenerateReport=async()=>{try{const response=await axios.get(\"http://localhost:5050/api/xreport\",{params:{startHour,endHour}});setReportData(response.data);}catch(err){alert(\"❌ Failed to fetch report data.\");}};const handleBack=()=>{navigate(-1);};return/*#__PURE__*/_jsxs(\"div\",{className:\"p-6 max-w-6xl mx-auto\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:handleBack,className:\"mb-4 px-4 py-2 bg-gray-200 hover:bg-gray-300 rounded\",children:\"\\uD83D\\uDD19 Back\"}),/*#__PURE__*/_jsx(\"h2\",{className:\"text-3xl font-bold text-indigo-600 mb-6 text-center\",children:\"\\uD83D\\uDCCA X-Report - Hourly Sales Breakdown\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col md:flex-row items-center gap-4 mb-6 justify-center\",children:[/*#__PURE__*/_jsxs(\"label\",{className:\"flex items-center gap-2\",children:[\"Start Hour:\",/*#__PURE__*/_jsx(\"select\",{value:startHour,onChange:e=>setStartHour(parseInt(e.target.value)),className:\"border px-2 py-1 rounded\",children:[...Array(24).keys()].map(hour=>/*#__PURE__*/_jsxs(\"option\",{value:hour,children:[hour,\":00\"]},hour))})]}),/*#__PURE__*/_jsxs(\"label\",{className:\"flex items-center gap-2\",children:[\"End Hour:\",/*#__PURE__*/_jsx(\"select\",{value:endHour,onChange:e=>setEndHour(parseInt(e.target.value)),className:\"border px-2 py-1 rounded\",children:[...Array(24).keys()].map(hour=>/*#__PURE__*/_jsxs(\"option\",{value:hour,children:[hour,\":00\"]},hour))})]}),/*#__PURE__*/_jsx(\"button\",{onClick:handleGenerateReport,className:\"bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded\",children:\"\\u2705 Generate Report\"})]}),reportData.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"overflow-x-auto\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-semibold mb-4\",children:\"Report Data\"}),/*#__PURE__*/_jsxs(\"table\",{className:\"min-w-full border border-gray-300 text-sm\",children:[/*#__PURE__*/_jsx(\"thead\",{className:\"bg-gray-100\",children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{className:\"px-3 py-2 border\",children:\"Hour\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-3 py-2 border\",children:\"Transactions\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-3 py-2 border\",children:\"Sales Revenue ($)\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-3 py-2 border\",children:\"Total Sales ($)\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-3 py-2 border\",children:\"Returns ($)\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-3 py-2 border\",children:\"Drinks Sold\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-3 py-2 border\",children:\"Voids ($)\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-3 py-2 border\",children:\"Discards ($)\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-3 py-2 border\",children:\"Payment Methods\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:reportData.map((row,index)=>/*#__PURE__*/_jsxs(\"tr\",{className:\"hover:bg-gray-50\",children:[/*#__PURE__*/_jsx(\"td\",{className:\"px-3 py-2 border text-center\",children:row.hour}),/*#__PURE__*/_jsx(\"td\",{className:\"px-3 py-2 border text-center\",children:row.total_transactions}),/*#__PURE__*/_jsx(\"td\",{className:\"px-3 py-2 border text-center\",children:Number(row.sales_revenue).toFixed(2)}),/*#__PURE__*/_jsx(\"td\",{className:\"px-3 py-2 border text-center\",children:Number(row.total_sales).toFixed(2)}),/*#__PURE__*/_jsx(\"td\",{className:\"px-3 py-2 border text-center\",children:Number(row.total_returns).toFixed(2)}),/*#__PURE__*/_jsx(\"td\",{className:\"px-3 py-2 border text-center\",children:row.drink_sales}),/*#__PURE__*/_jsx(\"td\",{className:\"px-3 py-2 border text-center\",children:Number(row.voids).toFixed(2)}),/*#__PURE__*/_jsx(\"td\",{className:\"px-3 py-2 border text-center\",children:Number(row.discards).toFixed(2)}),/*#__PURE__*/_jsx(\"td\",{className:\"px-3 py-2 border text-center\",children:row.payment_methods||\"N/A\"})]},index))})]})]})]});};export default XReport;","map":{"version":3,"names":["React","useState","axios","useNavigate","jsx","_jsx","jsxs","_jsxs","XReport","startHour","setStartHour","endHour","setEndHour","reportData","setReportData","navigate","handleGenerateReport","response","get","params","data","err","alert","handleBack","className","children","onClick","value","onChange","e","parseInt","target","Array","keys","map","hour","length","row","index","total_transactions","Number","sales_revenue","toFixed","total_sales","total_returns","drink_sales","voids","discards","payment_methods"],"sources":["/Users/faqiangmei/Desktop/react-fix-test/frontend/src/components/XReport.js"],"sourcesContent":["import React, { useState } from \"react\";\nimport axios from \"axios\";\nimport { useNavigate } from \"react-router-dom\";\n\nconst XReport = () => {\n  const [startHour, setStartHour] = useState(0);\n  const [endHour, setEndHour] = useState(23);\n  const [reportData, setReportData] = useState([]);\n  const navigate = useNavigate();\n\n  const handleGenerateReport = async () => {\n    try {\n      const response = await axios.get(\"http://localhost:5050/api/xreport\", {\n        params: {\n          startHour,\n          endHour,\n        },\n      });\n      setReportData(response.data);\n    } catch (err) {\n      alert(\"❌ Failed to fetch report data.\");\n    }\n  };\n\n  const handleBack = () => {\n    navigate(-1);\n  };\n\n  return (\n    <div className=\"p-6 max-w-6xl mx-auto\">\n      <button\n        onClick={handleBack}\n        className=\"mb-4 px-4 py-2 bg-gray-200 hover:bg-gray-300 rounded\"\n      >\n        🔙 Back\n      </button>\n\n      <h2 className=\"text-3xl font-bold text-indigo-600 mb-6 text-center\">\n        📊 X-Report - Hourly Sales Breakdown\n      </h2>\n\n      <div className=\"flex flex-col md:flex-row items-center gap-4 mb-6 justify-center\">\n        <label className=\"flex items-center gap-2\">\n          Start Hour:\n          <select\n            value={startHour}\n            onChange={(e) => setStartHour(parseInt(e.target.value))}\n            className=\"border px-2 py-1 rounded\"\n          >\n            {[...Array(24).keys()].map((hour) => (\n              <option key={hour} value={hour}>\n                {hour}:00\n              </option>\n            ))}\n          </select>\n        </label>\n\n        <label className=\"flex items-center gap-2\">\n          End Hour:\n          <select\n            value={endHour}\n            onChange={(e) => setEndHour(parseInt(e.target.value))}\n            className=\"border px-2 py-1 rounded\"\n          >\n            {[...Array(24).keys()].map((hour) => (\n              <option key={hour} value={hour}>\n                {hour}:00\n              </option>\n            ))}\n          </select>\n        </label>\n\n        <button\n          onClick={handleGenerateReport}\n          className=\"bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded\"\n        >\n          ✅ Generate Report\n        </button>\n      </div>\n\n      {reportData.length > 0 && (\n        <div className=\"overflow-x-auto\">\n          <h3 className=\"text-xl font-semibold mb-4\">Report Data</h3>\n          <table className=\"min-w-full border border-gray-300 text-sm\">\n            <thead className=\"bg-gray-100\">\n              <tr>\n                <th className=\"px-3 py-2 border\">Hour</th>\n                <th className=\"px-3 py-2 border\">Transactions</th>\n                <th className=\"px-3 py-2 border\">Sales Revenue ($)</th>\n                <th className=\"px-3 py-2 border\">Total Sales ($)</th>\n                <th className=\"px-3 py-2 border\">Returns ($)</th>\n                <th className=\"px-3 py-2 border\">Drinks Sold</th>\n                <th className=\"px-3 py-2 border\">Voids ($)</th>\n                <th className=\"px-3 py-2 border\">Discards ($)</th>\n                <th className=\"px-3 py-2 border\">Payment Methods</th>\n              </tr>\n            </thead>\n            <tbody>\n              {reportData.map((row, index) => (\n                <tr key={index} className=\"hover:bg-gray-50\">\n                  <td className=\"px-3 py-2 border text-center\">{row.hour}</td>\n                  <td className=\"px-3 py-2 border text-center\">{row.total_transactions}</td>\n                  <td className=\"px-3 py-2 border text-center\">{Number(row.sales_revenue).toFixed(2)}</td>\n                  <td className=\"px-3 py-2 border text-center\">{Number(row.total_sales).toFixed(2)}</td>\n                  <td className=\"px-3 py-2 border text-center\">{Number(row.total_returns).toFixed(2)}</td>\n                  <td className=\"px-3 py-2 border text-center\">{row.drink_sales}</td>\n                  <td className=\"px-3 py-2 border text-center\">{Number(row.voids).toFixed(2)}</td>\n                  <td className=\"px-3 py-2 border text-center\">{Number(row.discards).toFixed(2)}</td>\n                  <td className=\"px-3 py-2 border text-center\">{row.payment_methods || \"N/A\"}</td>\n                </tr>\n              ))}\n            </tbody>\n          </table>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default XReport;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}