{"ast":null,"code":"// src/components/Login.js\nimport React,{useState}from\"react\";import axios from\"axios\";import{useNavigate}from\"react-router-dom\";import{GoogleLogin}from\"@react-oauth/google\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Login=_ref=>{let{onLogin}=_ref;const[username,setUsername]=useState(\"\");const[password,setPassword]=useState(\"\");const[error,setError]=useState(\"\");const navigate=useNavigate();const handleSubmit=async e=>{e.preventDefault();try{const res=await axios.post(\"http://localhost:5050/api/login\",{username,password});if(res.data.success){onLogin(res.data.user);}}catch(err){var _err$response,_err$response$data;setError(\"Login failed: \"+(((_err$response=err.response)===null||_err$response===void 0?void 0:(_err$response$data=_err$response.data)===null||_err$response$data===void 0?void 0:_err$response$data.message)||\"Unknown error\"));}};const handleGoogleLogin=async credentialResponse=>{try{const res=await axios.post(\"http://localhost:5050/api/google-login\",{token:credentialResponse.credential});if(res.data.success){onLogin(res.data.user);}}catch(err){setError(\"Google Login failed.\");}};return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen flex items-center justify-center bg-gray-100\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"w-full max-w-sm p-6 bg-white rounded shadow-md\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold mb-6 text-center text-blue-600\",children:\"Employee Login\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"space-y-4\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Employee Name\",value:username,onChange:e=>setUsername(e.target.value),className:\"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-blue-500\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",placeholder:\"Password\",value:password,onChange:e=>setPassword(e.target.value),className:\"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-blue-500\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"w-full bg-blue-600 text-white font-semibold py-2 rounded hover:bg-blue-700\",children:\"Login\"})]}),error&&/*#__PURE__*/_jsx(\"p\",{className:\"text-red-500 text-sm mt-3\",children:error}),/*#__PURE__*/_jsx(\"hr\",{className:\"my-6\"}),/*#__PURE__*/_jsx(GoogleLogin,{onSuccess:handleGoogleLogin,onError:()=>setError(\"Google Sign In Failed\")}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>navigate(\"/guest\"),className:\"mt-4 w-full bg-gray-500 text-white font-semibold py-2 rounded hover:bg-gray-600\",children:\"Continue as Guest\"})]})});};export default Login;","map":{"version":3,"names":["React","useState","axios","useNavigate","GoogleLogin","jsx","_jsx","jsxs","_jsxs","Login","_ref","onLogin","username","setUsername","password","setPassword","error","setError","navigate","handleSubmit","e","preventDefault","res","post","data","success","user","err","_err$response","_err$response$data","response","message","handleGoogleLogin","credentialResponse","token","credential","className","children","onSubmit","type","placeholder","value","onChange","target","onSuccess","onError","onClick"],"sources":["/Users/faqiangmei/Desktop/react-fix-test/frontend/src/components/Login.js"],"sourcesContent":["// src/components/Login.js\nimport React, { useState } from \"react\";\nimport axios from \"axios\";\nimport { useNavigate } from \"react-router-dom\";\nimport { GoogleLogin } from \"@react-oauth/google\";\n\nconst Login = ({ onLogin }) => {\n  const [username, setUsername] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [error, setError] = useState(\"\");\n  const navigate = useNavigate();\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    try {\n      const res = await axios.post(\"http://localhost:5050/api/login\", {\n        username,\n        password,\n      });\n      if (res.data.success) {\n        onLogin(res.data.user);\n      }\n    } catch (err) {\n      setError(\"Login failed: \" + (err.response?.data?.message || \"Unknown error\"));\n    }\n  };\n\n  const handleGoogleLogin = async (credentialResponse) => {\n    try {\n      const res = await axios.post(\"http://localhost:5050/api/google-login\", {\n        token: credentialResponse.credential,\n      });\n      if (res.data.success) {\n        onLogin(res.data.user);\n      }\n    } catch (err) {\n      setError(\"Google Login failed.\");\n    }\n  };\n\n  return (\n    <div className=\"min-h-screen flex items-center justify-center bg-gray-100\">\n      <div className=\"w-full max-w-sm p-6 bg-white rounded shadow-md\">\n        <h2 className=\"text-2xl font-bold mb-6 text-center text-blue-600\">\n          Employee Login\n        </h2>\n\n        <form onSubmit={handleSubmit} className=\"space-y-4\">\n          <input\n            type=\"text\"\n            placeholder=\"Employee Name\"\n            value={username}\n            onChange={(e) => setUsername(e.target.value)}\n            className=\"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-blue-500\"\n          />\n          <input\n            type=\"password\"\n            placeholder=\"Password\"\n            value={password}\n            onChange={(e) => setPassword(e.target.value)}\n            className=\"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-blue-500\"\n          />\n          <button\n            type=\"submit\"\n            className=\"w-full bg-blue-600 text-white font-semibold py-2 rounded hover:bg-blue-700\"\n          >\n            Login\n          </button>\n        </form>\n\n        {error && <p className=\"text-red-500 text-sm mt-3\">{error}</p>}\n\n        <hr className=\"my-6\" />\n\n        <GoogleLogin\n          onSuccess={handleGoogleLogin}\n          onError={() => setError(\"Google Sign In Failed\")}\n        />\n\n        <button\n          onClick={() => navigate(\"/guest\")}\n          className=\"mt-4 w-full bg-gray-500 text-white font-semibold py-2 rounded hover:bg-gray-600\"\n        >\n          Continue as Guest\n        </button>\n      </div>\n    </div>\n  );\n};\n\nexport default Login;\n"],"mappings":"AAAA;AACA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,KAAQ,OAAO,CACvC,MAAO,CAAAC,KAAK,KAAM,OAAO,CACzB,OAASC,WAAW,KAAQ,kBAAkB,CAC9C,OAASC,WAAW,KAAQ,qBAAqB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAElD,KAAM,CAAAC,KAAK,CAAGC,IAAA,EAAiB,IAAhB,CAAEC,OAAQ,CAAC,CAAAD,IAAA,CACxB,KAAM,CAACE,QAAQ,CAAEC,WAAW,CAAC,CAAGZ,QAAQ,CAAC,EAAE,CAAC,CAC5C,KAAM,CAACa,QAAQ,CAAEC,WAAW,CAAC,CAAGd,QAAQ,CAAC,EAAE,CAAC,CAC5C,KAAM,CAACe,KAAK,CAAEC,QAAQ,CAAC,CAAGhB,QAAQ,CAAC,EAAE,CAAC,CACtC,KAAM,CAAAiB,QAAQ,CAAGf,WAAW,CAAC,CAAC,CAE9B,KAAM,CAAAgB,YAAY,CAAG,KAAO,CAAAC,CAAC,EAAK,CAChCA,CAAC,CAACC,cAAc,CAAC,CAAC,CAClB,GAAI,CACF,KAAM,CAAAC,GAAG,CAAG,KAAM,CAAApB,KAAK,CAACqB,IAAI,CAAC,iCAAiC,CAAE,CAC9DX,QAAQ,CACRE,QACF,CAAC,CAAC,CACF,GAAIQ,GAAG,CAACE,IAAI,CAACC,OAAO,CAAE,CACpBd,OAAO,CAACW,GAAG,CAACE,IAAI,CAACE,IAAI,CAAC,CACxB,CACF,CAAE,MAAOC,GAAG,CAAE,KAAAC,aAAA,CAAAC,kBAAA,CACZZ,QAAQ,CAAC,gBAAgB,EAAI,EAAAW,aAAA,CAAAD,GAAG,CAACG,QAAQ,UAAAF,aAAA,kBAAAC,kBAAA,CAAZD,aAAA,CAAcJ,IAAI,UAAAK,kBAAA,iBAAlBA,kBAAA,CAAoBE,OAAO,GAAI,eAAe,CAAC,CAAC,CAC/E,CACF,CAAC,CAED,KAAM,CAAAC,iBAAiB,CAAG,KAAO,CAAAC,kBAAkB,EAAK,CACtD,GAAI,CACF,KAAM,CAAAX,GAAG,CAAG,KAAM,CAAApB,KAAK,CAACqB,IAAI,CAAC,wCAAwC,CAAE,CACrEW,KAAK,CAAED,kBAAkB,CAACE,UAC5B,CAAC,CAAC,CACF,GAAIb,GAAG,CAACE,IAAI,CAACC,OAAO,CAAE,CACpBd,OAAO,CAACW,GAAG,CAACE,IAAI,CAACE,IAAI,CAAC,CACxB,CACF,CAAE,MAAOC,GAAG,CAAE,CACZV,QAAQ,CAAC,sBAAsB,CAAC,CAClC,CACF,CAAC,CAED,mBACEX,IAAA,QAAK8B,SAAS,CAAC,2DAA2D,CAAAC,QAAA,cACxE7B,KAAA,QAAK4B,SAAS,CAAC,gDAAgD,CAAAC,QAAA,eAC7D/B,IAAA,OAAI8B,SAAS,CAAC,mDAAmD,CAAAC,QAAA,CAAC,gBAElE,CAAI,CAAC,cAEL7B,KAAA,SAAM8B,QAAQ,CAAEnB,YAAa,CAACiB,SAAS,CAAC,WAAW,CAAAC,QAAA,eACjD/B,IAAA,UACEiC,IAAI,CAAC,MAAM,CACXC,WAAW,CAAC,eAAe,CAC3BC,KAAK,CAAE7B,QAAS,CAChB8B,QAAQ,CAAGtB,CAAC,EAAKP,WAAW,CAACO,CAAC,CAACuB,MAAM,CAACF,KAAK,CAAE,CAC7CL,SAAS,CAAC,qFAAqF,CAChG,CAAC,cACF9B,IAAA,UACEiC,IAAI,CAAC,UAAU,CACfC,WAAW,CAAC,UAAU,CACtBC,KAAK,CAAE3B,QAAS,CAChB4B,QAAQ,CAAGtB,CAAC,EAAKL,WAAW,CAACK,CAAC,CAACuB,MAAM,CAACF,KAAK,CAAE,CAC7CL,SAAS,CAAC,qFAAqF,CAChG,CAAC,cACF9B,IAAA,WACEiC,IAAI,CAAC,QAAQ,CACbH,SAAS,CAAC,4EAA4E,CAAAC,QAAA,CACvF,OAED,CAAQ,CAAC,EACL,CAAC,CAENrB,KAAK,eAAIV,IAAA,MAAG8B,SAAS,CAAC,2BAA2B,CAAAC,QAAA,CAAErB,KAAK,CAAI,CAAC,cAE9DV,IAAA,OAAI8B,SAAS,CAAC,MAAM,CAAE,CAAC,cAEvB9B,IAAA,CAACF,WAAW,EACVwC,SAAS,CAAEZ,iBAAkB,CAC7Ba,OAAO,CAAEA,CAAA,GAAM5B,QAAQ,CAAC,uBAAuB,CAAE,CAClD,CAAC,cAEFX,IAAA,WACEwC,OAAO,CAAEA,CAAA,GAAM5B,QAAQ,CAAC,QAAQ,CAAE,CAClCkB,SAAS,CAAC,iFAAiF,CAAAC,QAAA,CAC5F,mBAED,CAAQ,CAAC,EACN,CAAC,CACH,CAAC,CAEV,CAAC,CAED,cAAe,CAAA5B,KAAK","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}